import React, { useState } from 'react';
import { ShoppingCart, Edit2, Save, X, Minus, Plus, Trash2 } from 'lucide-react';

const HookahShop = () => {
  const ADMIN_PASSWORD = '4047';
  
  const initialProducts = {
    'Ø¯ÙˆØ¨ÛŒ': [
      { id: 1, name: 'Ø¯ÙˆØ³ÛŒØ¨ Ø·Ù„Ø§ÛŒÛŒ', price: 200000, image: 'https://images.unsplash.com/photo-1557800634-7bf3c7305596?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 2, name: 'Ù¾Ø±ØªÙ‚Ø§Ù„ Ù†Ø¹Ù†Ø§', price: 200000, image: 'https://images.unsplash.com/photo-1557800636-894a64c1696f?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 3, name: 'Ø¢Ø¯Ø§Ù…Ø³ Ù†Ø¹Ù†Ø§', price: 200000, image: 'https://images.unsplash.com/photo-1582650625119-3a31f8fa2699?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 4, name: 'Ø¢Ø¯Ø§Ù…Ø³ Ø¯Ø§Ø±Ú†ÛŒÙ†', price: 200000, image: 'https://images.unsplash.com/photo-1599420186946-7b6fb4e297f0?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 5, name: 'Ø³ÛŒØ¨ ÛŒØ®', price: 200000, image: 'https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 6, name: 'Ø§Ù†Ø§Ø±', price: 200000, image: 'https://images.unsplash.com/photo-1615485500704-8e990f9900f7?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 7, name: 'Ù¾Ø±ØªÙ‚Ø§Ù„ ÛŒØ®', price: 200000, image: 'https://images.unsplash.com/photo-1582979512210-99b6a53386f9?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 8, name: 'Ù¾Ø±ØªÙ‚Ø§Ù„ Ø®Ø§Ù…Ù‡', price: 200000, image: 'https://images.unsplash.com/photo-1600271886742-f049cd451bba?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 9, name: 'Ù„Ø§Ùˆ', price: 200000, image: 'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 10, name: 'Ø¨ÛŒØ³Ú©ÙˆÛŒØª', price: 200000, image: 'https://images.unsplash.com/photo-1558326567-98ae2405596b?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 11, name: 'Ø¯Ú˜Ø§ÙˆÙˆ', price: 200000, image: 'https://images.unsplash.com/photo-1603400521630-9f2de124b33b?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 12, name: 'Ø´Ø¨Ù‡Ø§ÛŒ Ø¯Ø¨ÛŒ', price: 200000, image: 'https://images.unsplash.com/photo-1512941675424-1c17dabfdddc?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 13, name: 'Ø´Ø¨â€ŒÙ‡Ø§ÛŒ Ù…Ø³Ú©Ùˆ', price: 200000, image: 'https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 14, name: 'ÙˆÛŒØªØ§Ù…ÛŒÙ†', price: 200000, image: 'https://images.unsplash.com/photo-1610832958506-aa56368176cf?w=400', weight: '50 Ú¯Ø±Ù…' },
      { id: 15, name: 'ØªÙ…Ø´Ú© Ø¨Ø³ØªÙ†ÛŒ', price: 200000, image: 'https://images.unsplash.com/photo-1488477181946-6428a0291777?w=400', weight: '50 Ú¯Ø±Ù…' },
    ],
    'Ø±Ø§Ø­ÛŒÙ„': [
      { id: 16, name: 'Ø¯ÙˆØ³ÛŒØ¨ Ø³ÙÛŒØ¯', price: 180000, image: 'https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?w=400', weight: '250 Ú¯Ø±Ù…' },
      { id: 17, name: 'Ø¯ÙˆØ³ÛŒØ¨ Ù‚Ø±Ù…Ø²', price: 180000, image: 'https://images.unsplash.com/photo-1590005354167-6da97870c757?w=400', weight: '250 Ú¯Ø±Ù…' },
      { id: 18, name: 'Ø¯ÙˆØ³ÛŒØ¨ Ù…Ø´Ú©ÛŒ', price: 180000, image: 'https://images.unsplash.com/photo-1619546813926-a78fa6372cd2?w=400', weight: '250 Ú¯Ø±Ù…' },
      { id: 19, name: 'Ù¾Ø±ØªÙ‚Ø§Ù„', price: 180000, image: 'https://images.unsplash.com/photo-1547514701-42782101795e?w=400', weight: '250 Ú¯Ø±Ù…' },
      { id: 20, name: 'Ù†Ø¹Ù†Ø§', price: 180000, image: 'https://images.unsplash.com/photo-1628556270448-4d4e4148e1b1?w=400', weight: '250 Ú¯Ø±Ù…' },
      { id: 21, name: 'Ù¾Ø±ØªÙ‚Ø§Ù„ Ù†Ø¹Ù†Ø§', price: 180000, image: 'https://images.unsplash.com/photo-1609840114035-3c981c84f8cf?w=400', weight: '250 Ú¯Ø±Ù…' },
    ],
    'Ø¯Ø§Ù†ÛŒ': [
      { id: 37, name: 'Ù¾Ø§Ù†Ø¬ÛŒ', price: 220000, image: 'https://images.unsplash.com/photo-1560807707-8cc77767d783?w=400', weight: 'ØªØ±Ú©ÛŒÙ‡' },
      { id: 38, name: 'Ø¯ÙˆØ³ÛŒØ¨', price: 220000, image: 'https://images.unsplash.com/photo-1576179635662-9d1983e97e1e?w=400', weight: 'ØªØ±Ú©ÛŒÙ‡' },
    ]
  };

  const [products, setProducts] = useState(initialProducts);
  const [selectedBrand, setSelectedBrand] = useState('Ø¯ÙˆØ¨ÛŒ');
  const [cart, setCart] = useState([]);
  const [isAdmin, setIsAdmin] = useState(false);
  const [passwordInput, setPasswordInput] = useState('');
  const [showAdminPanel, setShowAdminPanel] = useState(false);
  const [editingProduct, setEditingProduct] = useState(null);
  const [boxDiscount, setBoxDiscount] = useState(0.99);
  const [cardNumber, setCardNumber] = useState('6037-9978-1234-5678');
  const [showCart, setShowCart] = useState(false);
  const [showCheckout, setShowCheckout] = useState(false);
  const [customerInfo, setCustomerInfo] = useState({ name: '', phone: '', address: '', receipt: null });
  const [selectedQuantity, setSelectedQuantity] = useState({});

  const handleAdminLogin = () => {
    if (passwordInput === ADMIN_PASSWORD) {
      setIsAdmin(true);
      setPasswordInput('');
    } else {
      alert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
    }
  };

  const handleEditProduct = (brand, product) => {
    setEditingProduct({ ...product, brand });
  };

  const handleSaveEdit = () => {
    if (!editingProduct) return;
    const newProducts = { ...products };
    const brandProducts = newProducts[editingProduct.brand];
    const index = brandProducts.findIndex(p => p.id === editingProduct.id);
    if (index !== -1) {
      brandProducts[index] = { ...editingProduct, price: parseFloat(editingProduct.price) };
      setProducts(newProducts);
    }
    setEditingProduct(null);
  };

  const handleImageChange = (e) => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onloadend = () => setEditingProduct({ ...editingProduct, image: reader.result });
      reader.readAsDataURL(file);
    }
  };

  const addToCart = (product, isBox) => {
    const qty = selectedQuantity[product.id] || 1;
    const price = isBox ? product.price * boxDiscount : product.price;
    const totalQty = isBox ? 10 * qty : qty;
    const type = isBox ? 'Ø¨Ø§Ú©Ø³' : 'Ø¹Ø¯Ø¯';
    
    const existingIndex = cart.findIndex(item => item.id === product.id && item.type === type);
    
    if (existingIndex !== -1) {
      const newCart = [...cart];
      newCart[existingIndex].quantity += totalQty;
      setCart(newCart);
    } else {
      setCart([...cart, { ...product, quantity: totalQty, price, type, unitPrice: price }]);
    }
    
    alert(`âœ“ ${product.name} Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`);
  };

  const updateQuantity = (index, change) => {
    const newCart = [...cart];
    const item = newCart[index];
    const step = item.type === 'Ø¨Ø§Ú©Ø³' ? 10 : 1;
    item.quantity = Math.max(step, item.quantity + change * step);
    setCart(newCart);
  };

  const removeFromCart = (index) => {
    setCart(cart.filter((_, i) => i !== index));
  };

  const getTotalPrice = () => {
    return cart.reduce((total, item) => total + (item.unitPrice * item.quantity), 0);
  };

  const formatPrice = (price) => {
    return new Intl.NumberFormat('fa-IR').format(Math.round(price));
  };

  const handleReceiptUpload = (e) => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onloadend = () => setCustomerInfo({ ...customerInfo, receipt: reader.result });
      reader.readAsDataURL(file);
    }
  };

  const handleSubmitOrder = () => {
    if (!customerInfo.name || !customerInfo.phone || !customerInfo.address || !customerInfo.receipt) {
      alert('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ùˆ Ø±Ø³ÛŒØ¯ Ù¾Ø±Ø¯Ø§Ø®Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
      return;
    }
    alert('Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯! Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ….');
    setCart([]);
    setShowCheckout(false);
    setShowCart(false);
    setCustomerInfo({ name: '', phone: '', address: '', receipt: null });
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900" dir="rtl">
      <header className="bg-black bg-opacity-50 backdrop-blur-md border-b border-purple-500 sticky top-0 z-40">
        <div className="container mx-auto px-4 py-4">
          <div className="flex justify-between items-center">
            <div className="flex items-center gap-3">
              <div className="w-14 h-14 bg-white rounded-full flex items-center justify-center">
                <span className="text-2xl font-bold text-yellow-600">K</span>
              </div>
              <div>
                <h1 className="text-xl md:text-3xl font-bold text-yellow-400">ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ú©ÛŒØ¨Ø± Ú©ÙˆÙ‡</h1>
                <p className="text-yellow-300 text-xs">Ø¨Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡Ù„ÙˆÙ„ÛŒ</p>
              </div>
            </div>
            <div className="flex gap-2">
              <button onClick={() => setShowCart(true)} className="relative bg-green-500 text-white px-3 py-2 rounded-lg">
                <ShoppingCart size={20} />
                {cart.length > 0 && (
                  <span className="absolute -top-2 -right-2 bg-red-500 rounded-full w-5 h-5 flex items-center justify-center text-xs">{cart.length}</span>
                )}
              </button>
              {!isAdmin && (
                <button onClick={() => setShowAdminPanel(true)} className="bg-red-500 text-white px-3 py-2 rounded-lg text-sm">Ù…Ø¯ÛŒØ±ÛŒØª</button>
              )}
            </div>
          </div>
          <div className="mt-3 bg-yellow-400 bg-opacity-20 border border-yellow-500 rounded-lg p-2 text-center">
            <p className="text-yellow-200 text-xs md:text-sm">ğŸ“ Ù¾Ø®Ø´ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¯Ø± Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒØŒ Ø®Ø±Ø§Ø³Ø§Ù† Ø¬Ù†ÙˆØ¨ÛŒ Ùˆ Ø³ÛŒØ³ØªØ§Ù† Ùˆ Ø¨Ù„ÙˆÚ†Ø³ØªØ§Ù†</p>
            <p className="text-white text-sm">ğŸ“ <span className="font-bold text-yellow-300">09155251190</span></p>
          </div>
        </div>
      </header>

      {showAdminPanel && !isAdmin && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
          <div className="bg-gray-900 p-6 rounded-lg border-2 border-purple-500 w-full max-w-md">
            <h2 className="text-xl font-bold text-white mb-4">ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
            <input type="password" value={passwordInput} onChange={(e) => setPasswordInput(e.target.value)} placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" className="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-purple-500 mb-4" onKeyPress={(e) => e.key === 'Enter' && handleAdminLogin()} />
            <div className="flex gap-2">
              <button onClick={handleAdminLogin} className="flex-1 bg-green-500 text-white py-2 rounded-lg">ÙˆØ±ÙˆØ¯</button>
              <button onClick={() => setShowAdminPanel(false)} className="flex-1 bg-gray-700 text-white py-2 rounded-lg">Ø§Ù†ØµØ±Ø§Ù</button>
            </div>
          </div>
        </div>
      )}

      {editingProduct && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
          <div className="bg-gray-900 p-6 rounded-lg border-2 border-purple-500 w-full max-w-md max-h-[90vh] overflow-y-auto">
            <h2 className="text-xl font-bold text-white mb-4">ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„</h2>
            <div className="space-y-3">
              <input type="text" value={editingProduct.name} onChange={(e) => setEditingProduct({ ...editingProduct, name: e.target.value })} className="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-purple-500" />
              <input type="number" value={editingProduct.price} onChange={(e) => setEditingProduct({ ...editingProduct, price: e.target.value })} className="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-purple-500" />
              <input type="file" accept="image/*" onChange={handleImageChange} className="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-purple-500" />
              <div className="flex gap-2">
                <button onClick={handleSaveEdit} className="flex-1 bg-green-500 text-white py-2 rounded-lg flex items-center justify-center gap-2"><Save size={18} />Ø°Ø®ÛŒØ±Ù‡</button>
                <button onClick={() => setEditingProduct(null)} className="flex-1 bg-gray-700 text-white py-2 rounded-lg flex items-center justify-center gap-2"><X size={18} />Ø§Ù†ØµØ±Ø§Ù</button>
              </div>
            </div>
          </div>
        </div>
      )}

      {showCart && !showCheckout && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
          <div className="bg-gray-900 p-6 rounded-lg border-2 border-purple-500 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <h2 className="text-2xl font-bold text-white mb-4">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h2>
            {cart.length === 0 ? (
              <p className="text-gray-400 text-center py-8">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>
            ) : (
              <>
                {cart.map((item, i) => (
                  <div key={i} className="bg-gray-800 p-4 rounded-lg mb-3">
                    <div className="flex justify-between mb-2">
                      <h3 className="text-white font-semibold">{item.name}</h3>
                      <button onClick={() => removeFromCart(i)} className="bg-red-500 text-white p-2 rounded-lg"><Trash2 size={16} /></button>
                    </div>
                    <p className="text-gray-400 text-sm">{item.type}</p>
                    <div className="flex items-center justify-between mt-2">
                      <div className="flex items-center gap-2">
                        <button onClick={() => updateQuantity(i, -1)} className="bg-gray-700 text-white p-1 rounded"><Minus size={16} /></button>
                        <span className="text-white px-3">{item.quantity}</span>
                        <button onClick={() => updateQuantity(i, 1)} className="bg-gray-700 text-white p-1 rounded"><Plus size={16} /></button>
                      </div>
                      <span className="text-yellow-400 font-bold">{formatPrice(item.unitPrice * item.quantity)} ØªÙˆÙ…Ø§Ù†</span>
                    </div>
                  </div>
                ))}
                <div className="border-t border-purple-500 pt-4 mt-4">
                  <div className="flex justify-between text-xl font-bold text-white mb-4">
                    <span>Ø¬Ù…Ø¹ Ú©Ù„:</span>
                    <span className="text-yellow-400">{formatPrice(getTotalPrice())} ØªÙˆÙ…Ø§Ù†</span>
                  </div>
                  <div className="flex gap-2">
                    <button onClick={() => setShowCheckout(true)} className="flex-1 bg-green-500 text-white py-3 rounded-lg">ØªÚ©Ù…ÛŒÙ„ Ø®Ø±ÛŒØ¯</button>
                    <button onClick={() => setShowCart(false)} className="flex-1 bg-gray-700 text-white py-3 rounded-lg">Ø¨Ø³ØªÙ†</button>
                  </div>
                </div>
              </>
            )}
          </div>
        </div>
      )}

      {showCheckout && (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
          <div className="bg-gray-900 p-6 rounded-lg border-2 border-purple-500 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <h2 className="text-2xl font-bold text-white mb-4">ØªÚ©Ù…ÛŒÙ„ Ø®Ø±ÛŒØ¯</h2>
            <div className="space-y-4">
              <input type="text" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ" value={customerInfo.name} onChange={(e) => setCustomerInfo({ ...customerInfo, name: e.target.value })} className="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-purple-500" />
              <input type="tel" placeholder="09xxxxxxxxx" value={customerInfo.phone} onChange={(e) => setCustomerInfo({ ...customerInfo, phone: e.target.value })} className="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-purple-500" />
              <textarea placeholder="Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„" value={customerInfo.address} onChange={(e) => setCustomerInfo({ ...customerInfo, address: e.target.value })} className="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-purple-500 h-24"></textarea>
              
              <div className="bg-gray-800 p-4 rounded-lg">
                <p className="text-yellow-400 font-bold mb-2">Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ø¬Ù‡Øª Ù¾Ø±Ø¯Ø§Ø®Øª:</p>
                <p className="text-white text-lg font-mono text-center">{isAdmin ? <input type="text" value={cardNumber} onChange={(e) => setCardNumber(e.target.value)} className="w-full px-4 py-2 rounded bg-gray-700 text-white" /> : cardNumber}</p>
                <p className="text-gray-400 text-sm mt-2 text-center">Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº {formatPrice(getTotalPrice())} ØªÙˆÙ…Ø§Ù† Ø±Ø§ ÙˆØ§Ø±ÛŒØ² Ú©Ù†ÛŒØ¯</p>
              </div>
              
              <div>
                <label className="text-white block mb-2">Ø¢Ù¾Ù„ÙˆØ¯ Ø±Ø³ÛŒØ¯ Ù¾Ø±Ø¯Ø§Ø®Øª</label>
                <input type="file" accept="image/*" onChange={handleReceiptUpload} className="w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-purple-500" />
                {customerInfo.receipt && <p className="text-green-400 text-sm mt-2">âœ“ Ø±Ø³ÛŒØ¯ Ø¢Ù¾Ù„ÙˆØ¯ Ø´Ø¯</p>}
              </div>
              
              <div className="flex gap-2">
                <button onClick={handleSubmitOrder} className="flex-1 bg-green-500 text-white py-3 rounded-lg">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</button>
                <button onClick={() => setShowCheckout(false)} className="flex-1 bg-gray-700 text-white py-3 rounded-lg">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
              </div>
            </div>
          </div>
        </div>
      )}

      {isAdmin && (
        <div className="container mx-auto px-4 py-4">
          <div className="bg-gray-900 bg-opacity-50 p-4 rounded-lg border border-purple-500">
            <h3 className="text-white font-bold mb-2">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h3>
            <div className="flex gap-4 flex-wrap items-center">
              <label className="text-white text-sm">ØªØ®ÙÛŒÙ Ø¨Ø§Ú©Ø³:</label>
              <input type="number" step="0.01" value={boxDiscount} onChange={(e) => setBoxDiscount(parseFloat(e.target.value))} className="px-3 py-2 rounded bg-gray-800 text-white border border-purple-500 w-24" />
              <button onClick={() => setIsAdmin(false)} className="mr-auto bg-red-500 text-white px-4 py-2 rounded-lg">Ø®Ø±ÙˆØ¬</button>
            </div>
          </div>
        </div>
      )}

      <div className="container mx-auto px-4 py-6">
        <div className="flex gap-3 mb-6 flex-wrap">
          {Object.keys(products).map((brand) => (
            <button key={brand} onClick={() => setSelectedBrand(brand)} className={`px-6 py-3 rounded-lg font-bold transition-all ${selectedBrand === brand ? 'bg-gradient-to-r from-yellow-400 to-orange-500 text-black' : 'bg-gray-800 text-white'}`}>
              Ø¨Ø±Ù†Ø¯ {brand}
            </button>
          ))}
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
          {products[selectedBrand].map((product) => (
            <div key={product.id} className="bg-gray-900 border-2 border-purple-500 rounded-lg overflow-hidden hover:border-yellow-400 transition-all">
              <div className="relative">
                <img src={product.image} alt={product.name} className="w-full h-40 object-cover" />
                {isAdmin && (
                  <button onClick={() => handleEditProduct(selectedBrand, product)} className="absolute top-2 right-2 bg-blue-500 text-white p-2 rounded-lg">
                    <Edit2 size={16} />
                  </button>
                )}
                <div className="absolute bottom-2 left-2 bg-black bg-opacity-75 text-yellow-400 px-2 py-1 rounded text-xs">{product.weight}</div>
              </div>
              <div className="p-4">
                <h3 className="text-lg font-bold text-white mb-2">{product.name}</h3>
                <div className="mb-3 text-sm">
                  <div className="flex justify-between text-gray-400 mb-1">
                    <span>Ø¹Ø¯Ø¯ÛŒ:</span>
                    <span className="text-yellow-400 font-bold">{formatPrice(product.price)} ØªÙˆÙ…Ø§Ù†</span>
                  </div>
                  <div className="flex justify-between text-gray-400">
                    <span>Ø¨Ø§Ú©Ø³:</span>
                    <span className="text-green-400 font-bold">{formatPrice(product.price * 10 * boxDiscount)} ØªÙˆÙ…Ø§Ù†</span>
                  </div>
                </div>
                
                <div className="mb-3">
                  <label className="text-gray-400 text-xs block mb-1">ØªØ¹Ø¯Ø§Ø¯:</label>
                  <input type="number" min="1" defaultValue="1" onChange={(e) => setSelectedQuantity({...selectedQuantity, [product.id]: parseInt(e.target.value) || 1})} classNa
